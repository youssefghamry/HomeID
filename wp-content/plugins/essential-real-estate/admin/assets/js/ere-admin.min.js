(function(o){"use strict";var t={init:function(){this.toolTip();this.formSearchProcess();this.additionalFieldProcess();this.additionalFeaturesProcess()},toolTip:function(){o(".tips, .help_tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})},formSearchProcess:function(){var i=".ere-property-select-meta-box-wrap";var r=ere_admin_vars.ajax_url;var e=ere_admin_vars.enable_filter_location;if(e=="1"){o(".ere-property-country-ajax",i).select2();o(".ere-property-state-ajax",i).select2();o(".ere-property-city-ajax",i).select2();o(".ere-property-neighborhood-ajax",i).select2()}var n=function(){var a=o(".ere-property-country-ajax",i);var t=o(".ere-property-state-ajax",i);var e=t.attr("data-slug");if(typeof e==="undefined"){e="1"}if(a.length&&t.length){var n=a.val();o.ajax({type:"POST",url:r,data:{action:"ere_get_states_by_country_ajax",country:n,type:0,is_slug:e},beforeSend:function(){a.parent().children(".ere-loading").remove();a.parent().append('<span class="ere-loading"><i class="fa fa-spinner fa-spin"></i></span>')},success:function(e){t.html(e);var n=t.attr("data-selected");if(typeof n!=="undefined"){t.val(n)}a.parent().children(".ere-loading").remove()},error:function(){a.parent().children(".ere-loading").remove()},complete:function(){a.parent().children(".ere-loading").remove()}})}};n();o(".ere-property-country-ajax",i).on("change",function(){n()});var a=function(){var a=o(".ere-property-state-ajax",i);var t=o(".ere-property-city-ajax",i);var e=t.attr("data-slug");if(typeof e==="undefined"){e="1"}if(a.length&&t.length){var n=a.val();o.ajax({type:"POST",url:r,data:{action:"ere_get_cities_by_state_ajax",state:n,type:0,is_slug:e},beforeSend:function(){a.parent().children(".ere-loading").remove();a.parent().append('<span class="ere-loading"><i class="fa fa-spinner fa-spin"></i></span>')},success:function(e){t.html(e);var n=t.attr("data-selected");if(typeof n!=="undefined"){t.val(n)}a.parent().children(".ere-loading").remove()},error:function(){a.parent().children(".ere-loading").remove()},complete:function(){a.parent().children(".ere-loading").remove()}})}};a();o(".ere-property-state-ajax",i).on("change",function(){a()});var t=function(){var a=o(".ere-property-city-ajax",i);var t=o(".ere-property-neighborhood-ajax",i);var e=t.attr("data-slug");if(typeof e==="undefined"){e="1"}if(a.length&&t.length){var n=a.val();o.ajax({type:"POST",url:r,data:{action:"ere_get_neighborhoods_by_city_ajax",city:n,type:0,is_slug:e},beforeSend:function(){a.parent().children(".ere-loading").remove();a.parent().append('<span class="ere-loading"><i class="fa fa-spinner fa-spin"></i></span>')},success:function(e){t.html(e);var n=t.attr("data-selected");if(typeof n!=="undefined"){t.val(n)}a.parent().children(".ere-loading").remove()},error:function(){a.parent().children(".ere-loading").remove()},complete:function(){a.parent().children(".ere-loading").remove()}})}};t();o(".ere-property-city-ajax",i).on("change",function(){t()})},additionalFieldProcess:function(){var e=o("#additional_fields");this.additionalFieldReadOnly();this.additionalFieldEventProcess(e);e.on("gsf_add_clone_field",function(e){var n=o(e.target);t.additionalFieldEventProcess(n);n.find(".gsf-field-panel-content,.gsf-clone-field-panel-inner").find("#additional_fields_label input,#additional_fields_id input,#additional_fields_select_choices textarea").val("");n.find(".gsf-field-panel-content,.gsf-clone-field-panel-inner").find("#additional_fields_field_type select").val("text")});o(document).on("gsf_save_option_success",function(){console.log("Done");t.additionalFieldReadOnly()})},additionalFieldReadOnly:function(){o(".gsf-field-panel-content,.gsf-clone-field-panel-inner").each(function(){var e=o(this).find("#additional_fields_label input"),n=e.closest(".gsf-field-panel-content,.gsf-clone-field-panel-inner").find("#additional_fields_id input");if(n.val()!==""){n.attr("readonly","readonly")}})},additionalFieldEventProcess:function(e){e.find(".gsf-field-panel-content,.gsf-clone-field-panel-inner").find("#additional_fields_label input").on("change",function(){var e=o(this),n=e.closest(".gsf-field-panel-content,.gsf-clone-field-panel-inner").find("#additional_fields_id input");if(n.attr("readonly")!=="readonly"){n.val(t.toSlug(e.val()))}})},additionalFeaturesProcess:function(){var a=o("#real_estate_additional_features");a.find("button").on("click",function(){var e=a.find("tbody tr").length;var n="<tr>\n"+'    <td class="sort">\n'+'        <span><i class="dashicons dashicons-menu"></i></span>\n'+"    </td>\n"+'    <td class="title">\n'+'        <input type="text" name="real_estate_additional_feature_title['+e+']" value="">\n'+"    </td>\n"+'    <td class="value">\n'+'        <input type="text" name="real_estate_additional_feature_value['+e+']" value="">\n'+"    </td>\n"+'    <td class="remove"><i class="dashicons dashicons-dismiss"></i></td>\n'+"</tr>";a.find("tbody").append(n);a.find(".total").val(e+1)});a.find("tbody").sortable({items:"tr",handle:".sort > span",update:function(e,n){t.reindexAdditionalFeatures(a)},stop:function(e,n){}});a.on("click",".remove > i",function(){o(this).closest("tr").remove();a.find(".total").val(a.find("tbody tr").length);t.reindexAdditionalFeatures(a)})},reindexAdditionalFeatures:function(e){e.find(" tbody > tr").each(function(i){o(this).find("input").each(function(){var e=o(this).attr("name");e=e.replace(/^(\w+\[)(\d+)(\].*)$/g,function(e,n,a,t){return n+i+t});o(this).attr("name",e)})})},toSlug:function(a){a=String(a).toString();a=a.replace(/^\s+|\s+$/g,"");a=a.toLowerCase();var e={0:["°","₀","۰","０"],1:["¹","₁","۱","１"],2:["²","₂","۲","２"],3:["³","₃","۳","３"],4:["⁴","₄","۴","٤","４"],5:["⁵","₅","۵","٥","５"],6:["⁶","₆","۶","٦","６"],7:["⁷","₇","۷","７"],8:["⁸","₈","۸","８"],9:["⁹","₉","۹","９"],a:["à","á","ả","ã","ạ","ă","ắ","ằ","ẳ","ẵ","ặ","â","ấ","ầ","ẩ","ẫ","ậ","ā","ą","å","α","ά","ἀ","ἁ","ἂ","ἃ","ἄ","ἅ","ἆ","ἇ","ᾀ","ᾁ","ᾂ","ᾃ","ᾄ","ᾅ","ᾆ","ᾇ","ὰ","ά","ᾰ","ᾱ","ᾲ","ᾳ","ᾴ","ᾶ","ᾷ","а","أ","အ","ာ","ါ","ǻ","ǎ","ª","ა","अ","ا","ａ","ä"],b:["б","β","ب","ဗ","ბ","ｂ"],c:["ç","ć","č","ĉ","ċ","ｃ"],d:["ď","ð","đ","ƌ","ȡ","ɖ","ɗ","ᵭ","ᶁ","ᶑ","д","δ","د","ض","ဍ","ဒ","დ","ｄ"],e:["é","è","ẻ","ẽ","ẹ","ê","ế","ề","ể","ễ","ệ","ë","ē","ę","ě","ĕ","ė","ε","έ","ἐ","ἑ","ἒ","ἓ","ἔ","ἕ","ὲ","έ","е","ё","э","є","ə","ဧ","ေ","ဲ","ე","ए","إ","ئ","ｅ"],f:["ф","φ","ف","ƒ","ფ","ｆ"],g:["ĝ","ğ","ġ","ģ","г","ґ","γ","ဂ","გ","گ","ｇ"],h:["ĥ","ħ","η","ή","ح","ه","ဟ","ှ","ჰ","ｈ"],i:["í","ì","ỉ","ĩ","ị","î","ï","ī","ĭ","į","ı","ι","ί","ϊ","ΐ","ἰ","ἱ","ἲ","ἳ","ἴ","ἵ","ἶ","ἷ","ὶ","ί","ῐ","ῑ","ῒ","ΐ","ῖ","ῗ","і","ї","и","ဣ","ိ","ီ","ည်","ǐ","ი","इ","ی","ｉ"],j:["ĵ","ј","Ј","ჯ","ج","ｊ"],k:["ķ","ĸ","к","κ","Ķ","ق","ك","က","კ","ქ","ک","ｋ"],l:["ł","ľ","ĺ","ļ","ŀ","л","λ","ل","လ","ლ","ｌ"],m:["м","μ","م","မ","მ","ｍ"],n:["ñ","ń","ň","ņ","ŉ","ŋ","ν","н","ن","န","ნ","ｎ"],o:["ó","ò","ỏ","õ","ọ","ô","ố","ồ","ổ","ỗ","ộ","ơ","ớ","ờ","ở","ỡ","ợ","ø","ō","ő","ŏ","ο","ὀ","ὁ","ὂ","ὃ","ὄ","ὅ","ὸ","ό","о","و","θ","ို","ǒ","ǿ","º","ო","ओ","ｏ","ö"],p:["п","π","ပ","პ","پ","ｐ"],q:["ყ","ｑ"],r:["ŕ","ř","ŗ","р","ρ","ر","რ","ｒ"],s:["ś","š","ş","с","σ","ș","ς","س","ص","စ","ſ","ს","ｓ"],t:["ť","ţ","т","τ","ț","ت","ط","ဋ","တ","ŧ","თ","ტ","ｔ"],u:["ú","ù","ủ","ũ","ụ","ư","ứ","ừ","ử","ữ","ự","û","ū","ů","ű","ŭ","ų","µ","у","ဉ","ု","ူ","ǔ","ǖ","ǘ","ǚ","ǜ","უ","उ","ｕ","ў","ü"],v:["в","ვ","ϐ","ｖ"],w:["ŵ","ω","ώ","ဝ","ွ","ｗ"],x:["χ","ξ","ｘ"],y:["ý","ỳ","ỷ","ỹ","ỵ","ÿ","ŷ","й","ы","υ","ϋ","ύ","ΰ","ي","ယ","ｙ"],z:["ź","ž","ż","з","ζ","ز","ဇ","ზ","ｚ"],aa:["ع","आ","آ"],ae:["æ","ǽ"],ai:["ऐ"],ch:["ч","ჩ","ჭ","چ"],dj:["ђ","đ"],dz:["џ","ძ"],ei:["ऍ"],gh:["غ","ღ"],ii:["ई"],ij:["ĳ"],kh:["х","خ","ხ"],lj:["љ"],nj:["њ"],oe:["ö","œ","ؤ"],oi:["ऑ"],oii:["ऒ"],ps:["ψ"],sh:["ш","შ","ش"],shch:["щ"],ss:["ß"],sx:["ŝ"],th:["þ","ϑ","ث","ذ","ظ"],ts:["ц","ც","წ"],ue:["ü"],uu:["ऊ"],ya:["я"],yu:["ю"],zh:["ж","ჟ","ژ"],"(c)":["©"],A:["Á","À","Ả","Ã","Ạ","Ă","Ắ","Ằ","Ẳ","Ẵ","Ặ","Â","Ấ","Ầ","Ẩ","Ẫ","Ậ","Å","Ā","Ą","Α","Ά","Ἀ","Ἁ","Ἂ","Ἃ","Ἄ","Ἅ","Ἆ","Ἇ","ᾈ","ᾉ","ᾊ","ᾋ","ᾌ","ᾍ","ᾎ","ᾏ","Ᾰ","Ᾱ","Ὰ","Ά","ᾼ","А","Ǻ","Ǎ","Ａ","Ä"],B:["Б","Β","ब","Ｂ"],C:["Ç","Ć","Č","Ĉ","Ċ","Ｃ"],D:["Ď","Ð","Đ","Ɖ","Ɗ","Ƌ","ᴅ","ᴆ","Д","Δ","Ｄ"],E:["É","È","Ẻ","Ẽ","Ẹ","Ê","Ế","Ề","Ể","Ễ","Ệ","Ë","Ē","Ę","Ě","Ĕ","Ė","Ε","Έ","Ἐ","Ἑ","Ἒ","Ἓ","Ἔ","Ἕ","Έ","Ὲ","Е","Ё","Э","Є","Ə","Ｅ"],F:["Ф","Φ","Ｆ"],G:["Ğ","Ġ","Ģ","Г","Ґ","Γ","Ｇ"],H:["Η","Ή","Ħ","Ｈ"],I:["Í","Ì","Ỉ","Ĩ","Ị","Î","Ï","Ī","Ĭ","Į","İ","Ι","Ί","Ϊ","Ἰ","Ἱ","Ἳ","Ἴ","Ἵ","Ἶ","Ἷ","Ῐ","Ῑ","Ὶ","Ί","И","І","Ї","Ǐ","ϒ","Ｉ"],J:["Ｊ"],K:["К","Κ","Ｋ"],L:["Ĺ","Ł","Л","Λ","Ļ","Ľ","Ŀ","ल","Ｌ"],M:["М","Μ","Ｍ"],N:["Ń","Ñ","Ň","Ņ","Ŋ","Н","Ν","Ｎ"],O:["Ó","Ò","Ỏ","Õ","Ọ","Ô","Ố","Ồ","Ổ","Ỗ","Ộ","Ơ","Ớ","Ờ","Ở","Ỡ","Ợ","Ø","Ō","Ő","Ŏ","Ο","Ό","Ὀ","Ὁ","Ὂ","Ὃ","Ὄ","Ὅ","Ὸ","Ό","О","Θ","Ө","Ǒ","Ǿ","Ｏ","Ö"],P:["П","Π","Ｐ"],Q:["Ｑ"],R:["Ř","Ŕ","Р","Ρ","Ŗ","Ｒ"],S:["Ş","Ŝ","Ș","Š","Ś","С","Σ","Ｓ"],T:["Ť","Ţ","Ŧ","Ț","Т","Τ","Ｔ"],U:["Ú","Ù","Ủ","Ũ","Ụ","Ư","Ứ","Ừ","Ử","Ữ","Ự","Û","Ū","Ů","Ű","Ŭ","Ų","У","Ǔ","Ǖ","Ǘ","Ǚ","Ǜ","Ｕ","Ў","Ü"],V:["В","Ｖ"],W:["Ω","Ώ","Ŵ","Ｗ"],X:["Χ","Ξ","Ｘ"],Y:["Ý","Ỳ","Ỷ","Ỹ","Ỵ","Ÿ","Ῠ","Ῡ","Ὺ","Ύ","Ы","Й","Υ","Ϋ","Ŷ","Ｙ"],Z:["Ź","Ž","Ż","З","Ζ","Ｚ"],AE:["Æ","Ǽ"],Ch:["Ч"],Dj:["Ђ"],Dz:["Џ"],Gx:["Ĝ"],Hx:["Ĥ"],Ij:["Ĳ"],Jx:["Ĵ"],Kh:["Х"],Lj:["Љ"],Nj:["Њ"],Oe:["Œ"],Ps:["Ψ"],Sh:["Ш"],Shch:["Щ"],Ss:["ẞ"],Th:["Þ"],Ts:["Ц"],Ya:["Я"],Yu:["Ю"],Zh:["Ж"]};Object.keys(e).forEach(function(n){e[n].forEach(function(e){a=a.replace(new RegExp(e,"g"),n)})});return a.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}};o(document).ready(function(){t.init()})})(jQuery);
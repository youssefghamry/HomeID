(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(u){function f(){var o=this;o.top="auto",o.left="auto",o.right="auto",o.bottom="auto",o.set=function(e,t){u.isNumeric(t)&&(o[e]=Math.round(t))}}function a(n,i,s){function r(e,t){a(),n.data(y)||(e?(t&&n.data(H,!0),s.showTip(n)):(X.tipOpenImminent=!0,l=setTimeout(function(){l=null,o()},i.intentPollInterval)))}function e(e){a(),X.tipOpenImminent=!1,n.data(y)&&(n.data(H,!1),e?s.hideTip(n):(X.delayInProgress=!0,l=setTimeout(function(){l=null,s.hideTip(n),X.delayInProgress=!1},i.closeDelay)))}function o(){var e=Math.abs(X.previousX-X.currentX),t=Math.abs(X.previousY-X.currentY),o=e+t;i.intentSensitivity>o?s.showTip(n):(X.previousX=X.currentX,X.previousY=X.currentY,r())}function a(){l=clearTimeout(l),X.delayInProgress=!1}function t(){s.resetPosition(n)}var l=null;this.show=r,this.hide=e,this.cancel=a,this.resetPosition=t}function t(){function e(e,t,o,n,i){var s,r=t.split("-")[0],a=new f;switch(s=c(e)?p(e,r):l(e,r),t){case"n":a.set("left",s.left-o/2),a.set("bottom",X.windowHeight-s.top+i);break;case"e":a.set("left",s.left+i),a.set("top",s.top-n/2);break;case"s":a.set("left",s.left-o/2),a.set("top",s.top+i);break;case"w":a.set("top",s.top-n/2),a.set("right",X.windowWidth-s.left+i);break;case"nw":a.set("bottom",X.windowHeight-s.top+i),a.set("right",X.windowWidth-s.left-20);break;case"nw-alt":a.set("left",s.left),a.set("bottom",X.windowHeight-s.top+i);break;case"ne":a.set("left",s.left-20),a.set("bottom",X.windowHeight-s.top+i);break;case"ne-alt":a.set("bottom",X.windowHeight-s.top+i),a.set("right",X.windowWidth-s.left);break;case"sw":a.set("top",s.top+i),a.set("right",X.windowWidth-s.left-20);break;case"sw-alt":a.set("left",s.left),a.set("top",s.top+i);break;case"se":a.set("left",s.left-20),a.set("top",s.top+i);break;case"se-alt":a.set("top",s.top+i),a.set("right",X.windowWidth-s.left)}return a}function l(e,t){var o,n,i=e.offset(),s=e.outerWidth(),r=e.outerHeight();switch(t){case"n":o=i.left+s/2,n=i.top;break;case"e":o=i.left+s,n=i.top+r/2;break;case"s":o=i.left+s/2,n=i.top+r;break;case"w":o=i.left,n=i.top+r/2;break;case"nw":o=i.left,n=i.top;break;case"ne":o=i.left+s,n=i.top;break;case"sw":o=i.left,n=i.top+r;break;case"se":o=i.left+s,n=i.top+r}return{top:n,left:o}}function p(e,t){function o(){d.push(p.matrixTransform(u))}var n,i,s,r,a=e.closest("svg")[0],l=e[0],p=a.createSVGPoint(),c=l.getBBox(),u=l.getScreenCTM(),f=c.width/2,w=c.height/2,d=[],h=["nw","n","ne","e","se","s","sw","w"];if(p.x=c.x,p.y=c.y,o(),p.x+=f,o(),p.x+=f,o(),p.y+=w,o(),p.y+=w,o(),p.x-=f,o(),p.x-=f,o(),p.y-=w,o(),d[0].y!==d[1].y||d[0].x!==d[7].x)for(i=Math.atan2(u.b,u.a)*x,s=Math.ceil((i%360-22.5)/45),1>s&&(s+=8);s--;)h.push(h.shift());for(r=0;d.length>r;r++)if(h[r]===t){n=d[r];break}return{top:n.y+X.scrollTop,left:n.x+X.scrollLeft}}this.compute=e}function o(r){function e(t){t.data(y,!0),c.queue(function(e){o(t),e()})}function o(t){var e;if(t.data(y)){if(X.isTipOpen)return X.isClosing||n(X.activeHover),c.delay(100).queue(function(e){o(t),e()}),void 0;t.trigger("powerTipPreRender"),e=d(t),e&&(c.empty().append(e),t.trigger("powerTipRender"),X.activeHover=t,X.isTipOpen=!0,c.data(O,r.mouseOnToPopup),r.followMouse?i():(s(t),X.isFixedTipOpen=!0),c.fadeIn(r.fadeInTime,function(){X.desyncTimeout||(X.desyncTimeout=setInterval(l,500)),t.trigger("powerTipOpen")}))}}function n(t){X.isClosing=!0,X.activeHover=null,X.isTipOpen=!1,X.desyncTimeout=clearInterval(X.desyncTimeout),t.data(y,!1),t.data(H,!1),c.fadeOut(r.fadeOutTime,function(){var e=new f;X.isClosing=!1,X.isFixedTipOpen=!1,c.removeClass(),e.set("top",X.currentY+r.offset),e.set("left",X.currentX+r.offset),c.css(e),t.trigger("powerTipClose")})}function i(){if(!X.isFixedTipOpen&&(X.isTipOpen||X.tipOpenImminent&&c.data(k))){var e,t,o=c.outerWidth(),n=c.outerHeight(),i=new f;i.set("top",X.currentY+r.offset),i.set("left",X.currentX+r.offset),e=h(i,o,n),e!==Y.none&&(t=v(e),1===t?e===Y.right?i.set("left",X.windowWidth-o):e===Y.bottom&&i.set("top",X.scrollTop+X.windowHeight-n):(i.set("left",X.currentX-o-r.offset),i.set("top",X.currentY-n-r.offset))),c.css(i)}}function s(n){var e,i;r.smartPlacement?(e=u.fn.powerTip.smartPlacementLists[r.placement],u.each(e,function(e,t){var o=h(a(n,t),c.outerWidth(),c.outerHeight());return i=t,o===Y.none?!1:void 0})):(a(n,r.placement),i=r.placement),c.addClass(i)}function a(e,t){var o,n,i=0,s=new f;s.set("top",0),s.set("left",0),c.css(s);do{o=c.outerWidth(),n=c.outerHeight(),s=p.compute(e,t,o,n,r.offset),c.css(s)}while(5>=++i&&(o!==c.outerWidth()||n!==c.outerHeight()));return s}function l(){var e=!1;!X.isTipOpen||X.isClosing||X.delayInProgress||(X.activeHover.data(y)===!1||X.activeHover.is(":disabled")?e=!0:w(X.activeHover)||X.activeHover.is(":focus")||X.activeHover.data(H)||(c.data(O)?w(c)||(e=!0):e=!0),e&&n(X.activeHover))}var p=new t,c=u("#"+r.popupId);0===c.length&&(c=u("<div/>",{id:r.popupId}),0===g.length&&(g=u("body")),g.append(c)),r.followMouse&&(c.data(k)||(m.on("mousemove",i),T.on("scroll",i),c.data(k,!0))),r.mouseOnToPopup&&c.on({mouseenter:function(){c.data(O)&&X.activeHover&&X.activeHover.data(b).cancel()},mouseleave:function(){X.activeHover&&X.activeHover.data(b).hide()}}),this.showTip=e,this.hideTip=n,this.resetPosition=s}function c(e){return window.SVGElement&&e[0]instanceof SVGElement}function n(){X.mouseTrackingActive||(X.mouseTrackingActive=!0,u(function(){X.scrollLeft=T.scrollLeft(),X.scrollTop=T.scrollTop(),X.windowWidth=T.width(),X.windowHeight=T.height()}),m.on("mousemove",i),T.on({resize:function(){X.windowWidth=T.width(),X.windowHeight=T.height()},scroll:function(){var e=T.scrollLeft(),t=T.scrollTop();e!==X.scrollLeft&&(X.currentX+=e-X.scrollLeft,X.scrollLeft=e),t!==X.scrollTop&&(X.currentY+=t-X.scrollTop,X.scrollTop=t)}}))}function i(e){X.currentX=e.pageX,X.currentY=e.pageY}function w(e){var t=e.offset(),o=e[0].getBoundingClientRect(),n=o.right-o.left,i=o.bottom-o.top;return X.currentX>=t.left&&X.currentX<=t.left+n&&X.currentY>=t.top&&X.currentY<=t.top+i}function d(e){var t,o,n=e.data(p),i=e.data(P),s=e.data(I);return n?(u.isFunction(n)&&(n=n.call(e[0])),o=n):i?(u.isFunction(i)&&(i=i.call(e[0])),i.length>0&&(o=i.clone(!0,!0))):s&&(t=u("#"+s),t.length>0&&(o=t.html())),o}function h(e,t,o){var n=X.scrollTop,i=X.scrollLeft,s=n+X.windowHeight,r=i+X.windowWidth,a=Y.none;return(n>e.top||n>Math.abs(e.bottom-X.windowHeight)-o)&&(a|=Y.top),(e.top+o>s||Math.abs(e.bottom-X.windowHeight)>s)&&(a|=Y.bottom),(i>e.left||e.right+t>r)&&(a|=Y.left),(e.left+t>r||i>e.right)&&(a|=Y.right),a}function v(e){for(var t=0;e;)e&=e-1,t++;return t}var m=u(document),T=u(window),g=u("body"),b="displayController",y="hasActiveHover",H="forcedOpen",k="hasMouseMove",O="mouseOnToPopup",l="originalTitle",p="powertip",P="powertipjq",I="powertiptarget",x=180/Math.PI,X={isTipOpen:!1,isFixedTipOpen:!1,isClosing:!1,tipOpenImminent:!1,activeHover:null,currentX:0,currentY:0,previousX:0,previousY:0,desyncTimeout:null,mouseTrackingActive:!1,delayInProgress:!1,windowWidth:0,windowHeight:0,scrollTop:0,scrollLeft:0},Y={none:0,top:1,bottom:2,left:4,right:8};u.fn.powerTip=function(e,t){if(!this.length)return this;if("string"===u.type(e)&&u.powerTip[e])return u.powerTip[e].call(this,this,t);var s=u.extend({},u.fn.powerTip.defaults,e),r=new o(s);return n(),this.each(function(){var e,t=u(this),o=t.data(p),n=t.data(P),i=t.data(I);t.data(b)&&u.powerTip.destroy(t),e=t.attr("title"),o||i||n||!e||(t.data(p,e),t.data(l,e),t.removeAttr("title")),t.data(b,new a(t,s,r))}),s.manual||this.on({"mouseenter.powertip":function(e){u.powerTip.show(this,e)},"mouseleave.powertip":function(){u.powerTip.hide(this)},"focus.powertip":function(){u.powerTip.show(this)},"blur.powertip":function(){u.powerTip.hide(this,!0)},"keydown.powertip":function(e){27===e.keyCode&&u.powerTip.hide(this,!0)}}),this},u.fn.powerTip.defaults={fadeInTime:200,fadeOutTime:100,followMouse:!1,popupId:"powerTip",intentSensitivity:7,intentPollInterval:100,closeDelay:100,placement:"n",smartPlacement:!1,offset:10,mouseOnToPopup:!1,manual:!1},u.fn.powerTip.smartPlacementLists={n:["n","ne","nw","s"],e:["e","ne","se","w","nw","sw","n","s","e"],s:["s","se","sw","n"],w:["w","nw","sw","e","ne","se","n","s","w"],nw:["nw","w","sw","n","s","se","nw"],ne:["ne","e","se","n","s","sw","ne"],sw:["sw","w","nw","s","n","ne","sw"],se:["se","e","ne","s","n","nw","se"],"nw-alt":["nw-alt","n","ne-alt","sw-alt","s","se-alt","w","e"],"ne-alt":["ne-alt","n","nw-alt","se-alt","s","sw-alt","e","w"],"sw-alt":["sw-alt","s","se-alt","nw-alt","n","ne-alt","w","e"],"se-alt":["se-alt","s","sw-alt","ne-alt","n","nw-alt","e","w"]},u.powerTip={show:function(e,t){return t?(i(t),X.previousX=t.pageX,X.previousY=t.pageY,u(e).data(b).show()):u(e).first().data(b).show(!0,!0),e},reposition:function(e){return u(e).first().data(b).resetPosition(),e},hide:function(e,t){return e?u(e).first().data(b).hide(t):X.activeHover&&X.activeHover.data(b).hide(!0),e},destroy:function(e){return u(e).off(".powertip").each(function(){var e=u(this),t=[l,b,y,H];e.data(l)&&(e.attr("title",e.data(l)),t.push(p)),e.removeData(t)}),e}},u.powerTip.showTip=u.powerTip.show,u.powerTip.closeTip=u.powerTip.hide});